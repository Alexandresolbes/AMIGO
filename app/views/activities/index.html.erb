<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="all-activities-tab" data-bs-toggle="tab" data-bs-target="#all-activities-tab-pane" type="button" role="tab" aria-controls="all-activities-tab-pane" aria-selected="true">All activities</button>
  </li>

  <li class="nav-item" role="presentation">
    <button class="nav-link" id="create-tab" data-bs-toggle="tab" data-bs-target="#create-tab-pane" type="button" role="tab" aria-controls="create-tab-pane" aria-selected="false">Create activity</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="map-tab" data-bs-toggle="tab" data-bs-target="#map-tab-pane" type="button" role="tab" aria-controls="map-tab-pane" aria-selected="false">Map of activities</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">

  <div class="tab-pane fade show active" id="all-activities-tab-pane" role="tabpanel" aria-labelledby="all-activities-tab" tabindex="0">
    <% @activities.each do |activity| %>
      <div class="card mb-3" style="max-width: 100%;">
        <div class="row g-0">
          <div class="col-md-4">
          <% if activity.photo.key != nil %>
            <%= cl_image_tag activity.photo.key, class:"img-fluid rounded-start" %>
          <% else  %>
            <%= image_tag "https://source.unsplash.com/random",  class:"img-fluid rounded-start" %>
          <% end %>
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><%= link_to activity.title, trip_activity_path(@trip, activity) %></h5>
              <p class="card-text"><%= activity.description %></p>
              <p class="card-text">
                <% if activity.participations.count >= activity.min_amigos %>
                  <span>âœ…</span>
                <% else %>
                  <span>ðŸŸ¥</span>
                <% end %>
                <%= activity.participations.count %>/<%= activity.min_amigos %> Amigos
              </p>
              <div>
                <% activity.users.each do |user| %>
                  <%= cl_image_tag user.photo.key, class:"avatar-md" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="tab-pane fade" id="create-tab-pane" role="tabpanel" aria-labelledby="create-tab" tabindex="0">
    <%= render 'form', trip: @trip %>
  </div>

  <div class="tab-pane fade" id="map-tab-pane" role="tabpanel" aria-labelledby="map-tab" tabindex="0">
    <div style="width: 100%; height: 300px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_URL'] %>">
    </div>
  </div>

</div>
