<div class="container h-100">
  <div class="nav nav-tabs tabs-trip mx-2 my-4 rounded-4 p-0 row justify-content-between" id="myTab" role="tablist">

    <div class="col-4 nav-item" role="presentation">
      <button class="nav-link active" id="trip-users-tab" data-bs-toggle="tab" data-bs-target="#trip-users-tab-pane" type="button" role="tab" aria-controls="trip-users-tab-pane" aria-selected="true"><i class="fa-solid fa-users"></i></button>
    </div>

    <div class="col-4 nav-item" role="presentation">
      <button class="nav-link" id="manage-tab" data-bs-toggle="tab" data-bs-target="#manage-tab-pane" type="button" role="tab" aria-controls="manage-tab-pane" aria-selected="false"><i class="fa-solid fa-pen-to-square"></i></button>
    </div>

    <div class="col-4 nav-item" role="presentation">
      <button class="nav-link" id="housing-tab" data-bs-toggle="tab" data-bs-target="#housing-tab-pane" type="button" role="tab" aria-controls="housing-tab-pane" aria-selected="false">
        <%= image_tag("icons/bungalow-icon.svg", height: '30', width: 'auto') %>
      </button>
    </div>
  </div>

  <div class="tab-content px-2" id="myTabContent">

    <div class="tab-pane fade show active" id="trip-users-tab-pane" role="tabpanel" aria-labelledby="trip-users-tab" tabindex="0">
      <% @trip.users.each do |user| %>
        <% if user != current_user %>
          <div class="container p-2 my-3 shadow rounded-3 bg-white">
            <div class="row p-1 centered-box">
              <div class="col-4">
                <%= cl_image_tag user.photo.key, height:100, class:"rounded-3" %>
              </div>
              <div class="col-8">
                <p class="m-0"><%= user.first_name %><%= user.last_name %></p>
                <p class="m-0"><%= user.email %></p>
                <p class="m-0"><%= Participation.where(user_id: user.id).count %> activit√©s en commun</p>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="tab-pane fade" id="manage-tab-pane" role="tabpanel" aria-labelledby="manage-tab" tabindex="0">
      <%= render 'form', trip: @trip %>
    </div>

    <div class="tab-pane fade" id="map-tab-pane" role="tabpanel" aria-labelledby="map-tab" tabindex="0">
      <div style="width: 100%; height: 500px;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_URL'] %>">
      </div>
    </div>

  </div>
</div>
